window.onload=function(){document.body.style.display="block"},function(a){"use strict";a(function(){function e(e,a,l){var t=new RegExp("([?&])"+a+"=.*?(&|$)","i"),n=-1===e.indexOf("?")?"?":"&";return e.match(t)?e.replace(t,"$1"+a+"="+l+"$2"):e+n+a+"="+l}function l(e,a){var l=e.split("?");if(2<=l.length){for(var t=encodeURIComponent(a)+"=",n=l[1].split(/[&;]/g),d=n.length;0<d--;)-1!==n[d].lastIndexOf(t,0)&&n.splice(d,1);return e=l[0]+(0<n.length?"?"+n.join("&"):""),e}return e}a(document).on("keyup",".lastudio-icons-list-wrapper .la-icon-wrap-search",function(){var e=a(this).val(),l=a(this).next(".lastudio-icons-list").find(".la-icon-wrap");l.each(function(){var l=a(this);0>l.data("name").search(new RegExp(e,"i"))?l.hide():l.show()})}),a(window).on("load",function(){function t(){}function n(e){try{JSON.parse(e)}catch(a){return!1}return!0}function d(e){return e===Object(e)}function i(){return!!v.hasClass("lastudio-frontend-builder-wrap")}function s(e,l,n){let d=e.attr("data-element"),i=e.attr("data-unique-id"),s=i;C.hasOwnProperty(s)||(C[s]={}),0<!w.children(".lahb-spinner-wrap").length&&w.prepend("<div class=\"lahb-spinner-wrap\"><div class=\"lahb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>"),a.ajax({type:"POST",url:lahb_localize.ajaxurl,data:{action:"lahb_ajax_action",router:"get_component_field",nonce:lahb_localize.nonce,el_name:d},success:function(t){0<w.children(".lahb-spinner-wrap").length&&w.children(".lahb-spinner-wrap").remove(),a(".lastudio-backend-header-builder-wrap").append(t),u=w.find(".lahb-modal-wrap[data-element-target=\""+d+"\"]"),u.find(".lahb-tabs-list").find("li").removeClass("w-active"),u.find(".lahb-tab-panel").hide(),u.find(".lahb-tabs-list").find("li:first").addClass("w-active"),u.find(".lahb-modal-contents").children(".lahb-tab-panel:first").show();var c=u.find(".lahb-modal-contents").children(".lahb-tab-panel");if("desktop-view"==l?(c.find(".lahb-tab-panel[data-id=\"#all\"]").show(),c.find(".lahb-styling-screens a[data-device-mode=\"all\"]").closest("li").addClass("w-active").siblings("li").removeClass("w-active")):"tablets-view"==l?(c.find(".lahb-tab-panel[data-id=\"#tablets\"]").show(),c.find(".lahb-styling-screens a[data-device-mode=\"tablets\"]").closest("li").addClass("w-active").siblings("li").removeClass("w-active")):"mobiles-view"==l?(c.find(".lahb-tab-panel[data-id=\"#mobiles\"]").show(),c.find(".lahb-styling-screens a[data-device-mode=\"mobiles\"]").closest("li").addClass("w-active").siblings("li").removeClass("w-active")):"sticky-view"==l&&c.find(".lahb-tab-panel[data-id=\"#all\"]").show(),c.find(".lahb-tab-panel").find(".lahb-tab-panel:first").show(),u.show(),u.find(".lahb-field").each(function(){let e=a(this),l=e.find(".lahb-field-input"),t=l.data("field-name"),n=l.data("field-std");n="undefined"==typeof n?"":n,"undefined"==typeof C[s][t]?(l.val(n),n&&(C[s][t]=n)):l.val(C[s][t])}),n){let a=e.find("a").find("i").attr("class");if("sticky-view"==l)k[l][I][D].push({name:d,uniqueId:i,hidden_element:!1,editor_icon:a});else for(var b in S)k[b][I][D].push({name:d,uniqueId:i,hidden_element:!1,editor_icon:a})}if(o(),u.find(".lahb-dependency").on("change",function(){r(a(this))}),u.find(".lahb-dependency").trigger("change"),n){var p=e[0].outerHTML;a(".lahb-elements-item[data-element=\""+d+"\"][data-unique-id=\""+i+"\"]").each(function(){a(this).replaceWith(p)})}h(u[0])}}),t()}function r(e){let l=e.data("dependency"),t=e.find(".lahb-field-input").val();a.each(l,function(e,l){for(let n=0;n<l.length;n++){let d=u.find(".lahb-field-input[data-field-name=\""+l[n]+"\"]").closest(".lahb-field").hide(),i="lahb-field w-col-sm-12 lahb-dependency"==d.attr("class");e==t?(d.show(),i&&r(d)):i&&a.each(d.data("dependency"),function(e,a){for(let l=0;l<a.length;l++)u.find(".lahb-field-input[data-field-name=\""+a[l]+"\"]").closest(".lahb-field").hide()})}})}function o(){let e=a(".lahb-modal-wrap");e.find(".lahb-switcher").find(".lahb-field-input").on("change",function(){let e=a(this);e.is(":checked")?(e.attr("value","true").val("true"),e.prop("checked",!0)):(e.attr("value","false").val("false"),e.prop("checked",!1))}),e.find(".lahb-attach-image").each(function(){let e,l=a(this),t=l.find(".lahb-add-image"),n=l.find(".lahb-remove-image"),d=l.find(".lahb-preview-image");t.on("click",function(a){a.preventDefault();let t=l.find("input.lahb-attach-image"),i=t.val();return i=i?i:"",e?void e.open():void(e=wp.media({multiple:!1}),e.on("select",function(){let a=e.state().get("selection").first().toJSON();d.html("").append("<img src=\""+a.url+"\" alt=\"\">").css("display","block"),t.attr("value",a.id).val(a.id),n.show()}),e.open())}),n.on("click",function(e){e.preventDefault();let a=l.find("input.lahb-attach-image");d.html("").hide(),n.hide(),a.attr("value","").val("")})}),e.find(".lahb-number-unit").each(function(){let e=a(this),l=e.find("input[type=\"number\"]"),t=e.find(".lahb-opts").children("span"),n=e.find(".lahb-field-input");t.on("click",function(e){e.preventDefault();let d=a(this),i=d.data("value"),s=l.val();t.removeClass("lahb-active"),d.addClass("lahb-active"),s&&n.attr("value",s+i).val(s+i)}),l.on("change",function(t){t.preventDefault();let d=a(this),i=e.find(".lahb-opts").children("span.lahb-active").data("value"),s=l.val();s?n.attr("value",s+i).val(s+i):n.attr("value","").val("")})}),e.find(".lahb-custom-select").find(".lahb-opts").find("span").on("click",function(){let e=a(this),l=e.closest(".lahb-custom-select"),t=l.find(".lahb-opts").children("span"),n=l.find(".lahb-field-input"),d=e.data("value");t.removeClass("lahb-active"),e.addClass("lahb-active"),n.attr("value",d).val(d)}),e.find(".lahb-field-icons-wrap").each(function(){let e=a(this),l=e.find(".la-icon-wrap").find("label"),t=e.find(".lahb-field-input");l.on("click",function(e){e.preventDefault();let n=a(this),d=n.attr("for");l.removeClass("lahb-active"),n.addClass("lahb-active"),t.attr("value",a("#"+d).val()).val(a("#"+d).val())})});try{e.find(".lasf-field-icon").each(function(){let e=a(this).find(".lahb-field-input");e.val()&&(a(this).find(".lasf-icon-preview").removeClass("hidden").find("i").attr("class",e.val()),a(this).find(".lasf-icon-remove").removeClass("hidden"))}),e.find(".lasf-field-icon").lasf_field_icon()}catch(a){console.log("Cannot find lasf_field_icon()")}e.find(".lahb-color-picker").wpColorPicker(),e.find(".lahb-field").find(".lahb-field-input").each(function(){let e=a(this);if(e.hasClass("lahb-switcher-field")&&("true"==e.val()?e.prop("checked",!0):e.prop("checked",!1)),e.hasClass("lahb-field-custom-select")&&e.siblings(".lahb-opts").find("span").each(function(){let l=a(this);l.removeClass("lahb-active"),l.data("value")==e.val()&&l.addClass("lahb-active")}),e.hasClass("lahb-field-number-unit")){let l=e.val();if(l){let t=e.closest(".lahb-number-unit"),n=t.find("input[type=\"number\"]"),d=t.find(".lahb-opts").children("span"),i=parseFloat(l),s=l.split(i)[1];n.val(i),d.each(function(){let e=a(this),l=e.data("value");e.removeClass("lahb-active"),l==s&&e.addClass("lahb-active")})}else e.closest(".lahb-number-unit").find("input[type=\"number\"]").val("")}if(e.hasClass("lahb-icon-field")){let a=e.val(),l=e.closest(".lahb-field-icons-wrap"),t=l.find(".la-icon-wrap").find("label"),n=l.find(".lastudio-icons-list");a?(t.removeClass("lahb-active"),l.find(".la-icon-wrap input[value=\""+a+"\"]").next("label").addClass("lahb-active"),l.find(".la-icon-wrap input[value=\""+a+"\"]").closest(".la-icon-wrap").prependTo(n)):t.removeClass("lahb-active")}if(e.hasClass("lahb-attach-image")){let a=e.val(),l=e.siblings(".lahb-remove-image"),t=e.siblings(".lahb-preview-image");if(a&&!wp.media.attachment(a).destroyed){0<!u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").length&&u.find(".lahb-modal-contents").prepend("<div class=\"lahb-spinner-wrap\"><div class=\"lahb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>");try{wp.media.attachment(a).fetch().done(function(){0<u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").length&&u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").remove(),t.html("").append("<img src=\""+this.attributes.url+"\" alt=\"\">").css("display","block"),l.show()}).fail(function(){0<u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").length&&u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").remove(),t.html("").hide(),l.hide(),e.val("")})}catch(a){0<u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").length&&u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").remove(),t.html("").hide(),l.hide(),e.val("")}}else 0<u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").length&&u.find(".lahb-modal-contents").find(".lahb-spinner-wrap").remove(),t.html("").hide(),l.hide()}})}function h(a){function l(a){a=a||window.event,s=a.clientX,r=a.clientY,document.onmouseup=n,document.onmousemove=t}function t(l){l=l||window.event,d=s-l.clientX,i=r-l.clientY,s=l.clientX,r=l.clientY,a.style.top=a.offsetTop-i+"px",a.style.left=a.offsetLeft-d+"px"}function n(){document.onmouseup=null,document.onmousemove=null}if("undefined"==typeof a)return;let d=0,i=0,s=0,r=0;a.getElementsByClassName("lahb-modal-header")?a.getElementsByClassName("lahb-modal-header")[0].onmousedown=l:a.onmousedown=l}function c(){let e,l,t,n=a("#LaStudo_Iframe");n.length&&(t=document.getElementById("LaStudo_Iframe").contentWindow.jQuery,e=t("#lastudio-header-builder"),0==e.children(".lahb-spinner-wrap").length&&e.prepend("<div class=\"lahb-spinner-wrap\"><div class=\"lahb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>")),l=a(".lahb_save"),l.length&&l.val(lahb_localize.i18n.saved_text),a.ajax({type:"POST",url:lahb_localize.ajaxurl,data:{action:"lahb_ajax_action",router:"save_header_data",nonce:lahb_localize.nonce,headerPreset:lahb_localize.prebuild_header_key,frontendComponents:JSON.stringify(x)},success:function(d){if(i()){var s=a(d),r=s[0],o=s[1];t("#lahb-frontend-styles-inline-css").replaceWith(o),e.replaceWith(r);let i=x["desktop-view"].row1.settings,h=i.header_type,c="undefined"==typeof i.vertical_toggle?"false":i.vertical_toggle;"vertical"==h?(t("body").addClass("header-type-vertical"),"true"==c?t("body").removeClass("header-type-vertical--default").addClass("header-type-vertical--toggle"):t("body").removeClass("header-type-vertical--toggle").addClass("header-type-vertical--default")):t("body").removeClass("header-type-vertical header-type-vertical--toggle header-type-vertical--default"),n.length&&document.getElementById("LaStudo_Iframe").contentWindow.LaStudio.component.HeaderBuilder.reloadAllEvents(),l.val(lahb_localize.i18n.save_text),e.children(".lahb-spinner-wrap").remove()}},complete:function(){}}).done(function(){j&&a("#lahb-publish").trigger("click")})}function b(){for(let e in x=a.extend(!0,{},k),x)for(let a in x[e])for(let l in x[e][a]){let t=x[e][a][l];if("settings"==l||"left_settings"==l||"center_settings"==l||"right_settings"==l){let n=t.uniqueId;for(const d in n in C&&Object.assign(t,C[n]),t)t.hasOwnProperty(d)&&("hidden_element"!=d&&"order"!=d&&"boolean"==typeof t[d]&&(t[d]+=""),"order"==d&&(t[d]=k[e][a][l][d]))}else if(0!=t.length)for(let e of t){let a=e.uniqueId;for(const l in a in C&&Object.assign(e,C[a]),e)e.hasOwnProperty(l)&&"hidden_element"!=l&&"boolean"==typeof e[l]&&(e[l]+="")}}x["desktop-view"].row1.settings.element=k["desktop-view"].row1.settings.element,x["desktop-view"].row1.settings.header_type=k["desktop-view"].row1.settings.header_type}function p(e){m(e.target.result)}function m(e){e&&(n(e)||d(e))?(v.css({height:"1px",overflow:"hidden"}).prepend("<div class=\"lahb-spinner-wrap\"><div class=\"lahb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>"),a("#wpwrap").css("display","none"),e=n(e)?JSON.parse(e):e,C=e.lahb_data_components,k=e.lahb_data_editor_components,x=e.lahb_data_frontend_components,j=!0,c()):alert("Header import input is empty! That's why no data can import.")}let f,u,v=a("body"),w=a("#lastudio-backend-header-builder"),g=w.find(".lahb-elements-place"),_=w.find(".lahb-row-sortable"),y=w.find(".lahb-desktop-panel").find(".lahb-row[data-labhrow=\"row1\"]").find(".lahb-elements-place");v.addClass("lahb-desktop-device");let C=lahb_localize.components?lahb_localize.components:{},k=lahb_localize.editor_components?lahb_localize.editor_components:{},x=lahb_localize.frontend_components?lahb_localize.frontend_components:{};const S={"desktop-view":{},"tablets-view":{},"mobiles-view":{}};let D,I,q,P,j=!1;for(let e in v.removeClass("admin-bar"),t(),C)if(C.hasOwnProperty(e)){const l=C[e];if(-1!=e.search("logo")){let t=e.slice("5");w.find(".lahb-elements-item[data-element=\"logo\"][data-unique-id=\""+t+"\"]").each(function(){let e=a(this);wp.media.attachment(l.logo).fetch().done(function(){e.children("a").hide().after("<img class=\"lahb-img-placeholder-el\" src=\""+this.attributes.url+"\" alt=\"\">")})})}}if(w.on("click","#lahb-cleardata",function(l){if(l.preventDefault(),confirm(lahb_localize.i18n.clear_data_text)){let e=a.extend(!0,{},lahb_localize.default_data.editor_components);C={},k=e,x=lahb_localize.default_data.frontend_components,w.find(".lahb-col .lahb-elements-item").remove(),w.find("[data-unique-id]").map(function(){a(this).attr("data-unique-id",lahb_localize.default_data.uniqid+a(this).attr("data-unique-id").substr(13))}),c(),t()}}),a("#LaStudo_Iframe").css("height",window.innerHeight-48),a(".lahb-frontend-builder").niceScroll({cursorborder:"0",background:"#e7e7e7",cursorcolor:"#91989e"}),w.find(".lahb-tab-panel"+w.find(".lahb-tabs-list").find("li.w-active").find("a").attr("href")).addClass("tab-active").show(),w.on("click",".lahb-tabs-list a",function(e){e.preventDefault();let l=a(this),t=l.parent(),n=l.closest("ul").find("li"),d=l.closest("ul");d.hasClass("lahb-tabs-device-controls")||(n.removeClass("w-active"),t.addClass("w-active"),d.hasClass("lahb-element-groups")?w.find(".lahb-group-panel").hide().end().find(".lahb-group-panel[data-id=\""+l.attr("href")+"\"]").show():d.hasClass("lahb-styling-groups")?d.siblings(".lahb-styling-group-panel").hide().end().siblings(".lahb-styling-group-panel[data-id=\""+l.attr("href")+"\"]").show():d.hasClass("lahb-styling-screens")?w.find(".lahb-styling-screen-panel").hide().end().find(".lahb-styling-screen-panel[data-id=\""+l.attr("href")+"\"]").show():w.find(".lahb-tab-panel:not(.lahb-group-panel)").hide().end().find(".lahb-tab-panel"+l.attr("href")).fadeIn(300))}),w.on("click",".lahb-tabs-list.lahb-tabs-device-controls a",function(l){l.preventDefault();let e=a(this).attr("data-device-mode"),t=a(".lahb-tabs-device-controls a[data-device-mode=\""+e+"\"]").closest("li"),n=t.siblings("li");n.removeClass("w-active"),t.addClass("w-active"),a("a",t).each(function(){let e=a(this).attr("href");a(".lahb-tab-panel.lahb-styling-screen-panel[data-id=\""+e+"\"]").show(),a(e+".lahb-tab-panel").addClass("tab-active").show()}),a("a",n).each(function(){let e=a(this).attr("href");a(".lahb-tab-panel.lahb-styling-screen-panel[data-id=\""+e+"\"]").hide(),a(e+".lahb-tab-panel").removeClass("tab-active").hide()}),"tablets"===e?v.removeClass("lahb-desktop-device lahb-mobiles-device").addClass("lahb-tablets-device"):"mobiles"===e?v.removeClass("lahb-desktop-device lahb-tablets-device").addClass("lahb-mobiles-device"):v.removeClass("lahb-tablets-device lahb-mobiles-device").addClass("lahb-desktop-device")}),w.find(".lahb-full-modal-btn").on("click",function(e){e.preventDefault();let l=a(this),t=l.data("modal-target"),n=w.find(".lahb-full-modal[data-modal=\""+t+"\"]");v.css("overflow","hidden"),n.find("textarea").val(" "),n.fadeIn(200)}),w.find(".lahb-full-modal-close").on("click",function(e){e.preventDefault(),v.css("overflow","initial"),w.find(".lahb-full-modal").hide()}),w.on("click",".w-add-element",function(e){e.preventDefault();let l=a(this);w.find(".lahb-elements").show(),q=l.closest(".lahb-tab-panel").attr("id"),I=l.closest(".lahb-row").attr("data-labhrow"),D=l.attr("data-align-col")}),w.on("click",".lahb-modal-header i, .lahb_close",function(e){e.preventDefault();try{w.find(".lahb-color-picker").data("wpWpColorPicker").close()}catch(a){}w.find(".lahb-modal-wrap").hide(),w.find(".lahb-modal-wrap[data-element-target]").remove()}),w.find(".lahb-modal-wrap").on("click",".lahb-elements-item a",function(e){e.preventDefault();let l=a(this),t=new Date().valueOf(),n=a(this).find("i").attr("class"),d=`<span class="lahb-controls"><span class="lahb-tooltip tooltip-on-top" data-tooltip="Copy to Clipboard"><i class="lahb-control lahb-copy-btn dashicons dashicons-admin-page"></i></span><span class="lahb-tooltip tooltip-on-top" data-tooltip="Settings"><i class="lahb-control lahb-edit-btn dashicons dashicons-edit"></i></span><span class="lahb-tooltip tooltip-on-top" data-tooltip="Hide"><i class="lahb-control lahb-hide-btn dashicons dashicons-visibility"></i></span><span class="lahb-tooltip tooltip-on-top" data-tooltip="Remove"><i class="lahb-control lahb-delete-btn dashicons dashicons-trash"></i></span></span>`;if(l.closest(".lahb-elements-item").hasClass("lahb-clipboard-item")){let e=l.parent(),n=e.data("unique-id").toString();for(const e in C)if(C.hasOwnProperty(e)){const l=a.extend(!0,{},C[e]);n==e&&(C[t]=l)}f=P.clone().removeClass("w-col-sm-4").attr({"data-unique-id":t}).prepend(d)}else f=l.parent().clone().removeClass("w-col-sm-4").attr({"data-unique-id":t,"data-hidden_element":!1,"data-editor_icon":n}).prepend(d);w.find(".lahb-row[data-labhrow=\""+I+"\"]").find(".lahb-col.col-"+D).find(".lahb-elements-place").append(f),w.find(".lahb-modal-wrap").hide(),s(f,q,!0)}),w.on("click",".lahb-copy-btn",function(e){e.preventDefault();let l=a(this).closest(".lahb-elements-item").clone();P=l.clone(),a(".lahb-clipboard-item").remove(),l.removeClass("ui-sortable-handle").addClass("w-col-sm-4 lahb-clipboard-item"),l.children(".lahb-controls").remove().end().children("img").remove(),l.children("a").css({display:"block","background-color":"#e3e3e3"}),l.find("i").removeClass("dashicons dashicons-admin-page").addClass("dashicons dashicons-admin-page").css("color","#f60"),l.find(".lahb-element-name").text("Paste (Clipboard)"),a(".lahb-modal-wrap.lahb-elements").find(".lahb-modal-contents").prepend(l)}),w.on("click",".lahb-delete-btn",function(e){if(e.preventDefault(),confirm("Press OK to delete element, Cancel to leave")){let e=a(this).closest(".lahb-elements-item"),l=e.data("element"),n=e.data("unique-id").toString();if(q=e.closest(".lahb-tab-panel").attr("id"),I=e.closest(".lahb-row").attr("data-labhrow"),D=e.closest(".lahb-col").attr("data-align-col"),delete C[n],"sticky-view"==q){let e=k[q][I][D];for(let a=0;a<e.length;a++)e[a].uniqueId==n&&e.splice(a,1)}else for(let e in S){let a=k[e];(function(){for(let e in a){let l=a[e];for(let e in l){let a=l[e];for(let e=0;e<a.length;e++)if(a[e].uniqueId==n)return void a.splice(e,1)}}})()}b(),c(),t(),w.find(".lahb-elements-item[data-element=\""+l+"\"][data-unique-id=\""+n+"\"]").remove()}}),w.on("click","#lahb-saveastpl",function(l){l.preventDefault();let e=w.find(".lahb-modal-save-header");u=e,e.show(),o(),e.find(".lahb-dependency").on("change",function(){r(a(this))}),e.find(".lahb-dependency").trigger("change")}),w.on("click",".btn-complete-edits",function(l){l.preventDefault();var e=a(this).data("preset"),t={action:"lahb_ajax_action",router:"save_header_as_template",nonce:lahb_localize.nonce,frontendComponents:JSON.stringify(x),header_name:e.header_name,header_key:e.header_key,header_image:e.header_image};0==w.children(".lahb-spinner-wrap").length&&w.prepend("<div class=\"lahb-spinner-wrap\"><div class=\"lahb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>"),a.ajax({type:"POST",url:lahb_localize.ajaxurl,data:t,dataType:"json",success:function(e){w.children(".lahb-spinner-wrap").remove(),e.success?alert("Saved successfully!"):alert("Sorry, please try again!")}})}),w.on("click",".lahb_save_as_template",function(l){l.preventDefault();let t=w.find(".lahb-modal-save-header"),n=t.find("select[data-field-name=\"lahb_save_header_type\"]"),d=t.find("select[data-field-name=\"lahb_save_header_type_existing\"]"),i=t.find("input[data-field-name=\"lahb_save_header_type_new\"]"),s=t.find("input[data-field-name=\"lahb_save_header_custom_image\"]");if("add_new"==n.val()&&""==i.val())return alert("Please enter the new header name !"),!1;if("update"==n.val()&&0==a("option",d).length)return alert("Sorry currently you haven't any data yet - please use Add New method"),!1;let r={action:"lahb_ajax_action",router:"save_header_as_template",nonce:lahb_localize.nonce,frontendComponents:JSON.stringify(x),header_name:"",header_key:"",header_image:""};""!=s.val()&&(r.header_image=s.val()),"add_new"==n.val()&&(r.header_name=i.val()),"update"==n.val()&&(r.header_name=a("option:selected",d).text(),r.header_key=d.val()),a.ajax({type:"POST",url:lahb_localize.ajaxurl,data:r,dataType:"json",success:function(l){if(l.success){let n="",d="";for(let a in l.data){let t=l.data[a];d+="<option value=\""+a+"\">"+t.name+"</option>";let i=e(window.location.href.replace("#",""),"prebuild_header",a);n+="undefined"==typeof t.image?"<a class=\"lahb-prebuild-item\" data-saved-name=\""+a+"\" href=\""+i+"\"><span>"+t.name+"</span><i class=\"dashicons dashicons-trash\"></i></a>":"<a class=\"lahb-prebuild-item\" data-saved-name=\""+a+"\" href=\""+i+"\"><img src=\""+t.image+"\" alt=\""+t.name+"\"/><i class=\"dashicons dashicons-trash\"></i></a>"}a(".lahb-predefined-modal-inner-content").html(n),a(".lahb-modal-save-header select[data-field-name=\"lahb_save_header_type_existing\"]").html(d),alert("Saved successfully!"),t.hide()}else alert("Sorry, please try again!")}})}),w.on("click",".lahb-edit-btn",function(e){e.preventDefault();let l=a(this);w.find(".lahb-modal-wrap").hide(),w.find(".lahb-modal-wrap[data-element-target]").remove(),f=l.closest(".lahb-elements-item"),q=l.closest(".lahb-tab-panel").attr("id"),s(f,q,!1)}),w.on("click",".w-edit-column",function(e){e.preventDefault();let l=a(this);w.find(".lahb-modal-wrap").hide(),w.find(".lahb-modal-wrap[data-element-target]").remove(),f=l,q=l.closest(".lahb-tab-panel").attr("id"),s(f,q,!1)}),w.find(".lahb-tabs-panels").find(".lahb-row").children(".lahb-elements-item[data-hidden_element=\"true\"]").find("i.lahb-hide-btn").removeClass("dashicons dashicons-visibility").addClass("dashicons dashicons-hidden").closest(".lahb-tooltip").attr("data-tooltip","Show").closest(".lahb-row").addClass("lahb-row-hidden").css("opacity","0.45"),w.find(".lahb-elements-place").find(".lahb-elements-item[data-hidden_element=\"true\"]").find("i.lahb-hide-btn").removeClass("dashicons dashicons-visibility").addClass("dashicons dashicons-hidden").closest(".lahb-tooltip").attr("data-tooltip","Show"),w.on("click",".lahb-hide-btn",function(e){e.preventDefault();let l,n=a(this),d=n.closest(".lahb-elements-item"),i=d.data("element"),s=d.data("unique-id").toString();if(q=d.closest(".lahb-tab-panel").attr("id"),I=d.closest(".lahb-row").attr("data-labhrow"),D=d.closest(".lahb-col").attr("data-align-col"),"header-area"==i||"sticky-area"==i){let e=k[q][I].settings.hidden_element;k[q][I].settings.hidden_element=!e,l=!e,d.attr("data-hidden_element",!e).data("hidden_element",!e);let a=d.closest(".lahb-row");l?(n.removeClass("dashicons dashicons-visibility").addClass("dashicons dashicons-hidden").closest(".lahb-tooltip").attr("data-tooltip","Show"),a.addClass("lahb-row-hidden").css("opacity","0.45")):(n.removeClass("dashicons dashicons-hidden").addClass("dashicons dashicons-visibility").closest(".lahb-tooltip").attr("data-tooltip","Hide"),a.removeClass("lahb-row-hidden").css("opacity","1"))}else{const e=k[q][I][D];for(let a,t=0;t<e.length;t++)if(a=e[t],a.uniqueId==s){a.hidden_element=!a.hidden_element,l=a.hidden_element,d.attr("data-hidden_element",a.hidden_element).data("hidden_element",a.hidden_element);break}l?(n.removeClass("dashicons dashicons-visibility").addClass("dashicons dashicons-hidden").closest(".lahb-tooltip").attr("data-tooltip","Show"),d.find("a").css("color","#888"),d.addClass("lahb-row-hidden").css("opacity","0.45")):(n.removeClass("dashicons dashicons-hidden").addClass("dashicons dashicons-visibility").closest(".lahb-tooltip").attr("data-tooltip","Hide"),d.find("a").css("color","#0073aa"),d.removeClass("lahb-row-hidden").css("opacity","1"))}b(),c(),t()}),w.on("click",".lahb_save",function(e){e.preventDefault();let l=a(this),n=f.data("element"),d=f.data("unique-id"),s=d;u.find(".lahb-field").each(function(){let e=a(this),l=e.find(".lahb-field-input"),t=l.data("field-name"),n=l.val();""==n?C[s].hasOwnProperty(t)&&(C[s][t]=n):null!=n&&("string"==typeof n&&-1!=n.indexOf("\"")&&(n=n.replace(/"/g,"'")),C[s][t]=n)}),b(),c(),t();let r=f[0].outerHTML,o=w.find(".lahb-elements-item[data-element=\""+n+"\"][data-unique-id=\""+d+"\"]");o.each(function(){a(this).replaceWith(r)}),o=w.find(".lahb-elements-item[data-element=\""+n+"\"][data-unique-id=\""+d+"\"]"),u.find(".lahb-field.lahb-placeholder").each(function(){let e=a(this);if(e.hasClass("lahb-img-placeholder")){let a=e.find(".lahb-field-input").val();a?wp.media.attachment(a).fetch().done(function(){0<!o.children(".lahb-img-placeholder-el").length?o.attr("data-img-placeholder",a).children("a").hide().after("<img class=\"lahb-img-placeholder-el\" src=\""+this.attributes.url+"\" alt=\"\" />"):o.children(".lahb-img-placeholder-el").attr("src",this.attributes.url)}):o.removeAttr("data-img-placeholder").children("a").show().end().children(".lahb-img-placeholder-el").remove()}if(e.hasClass("lahb-text-placeholder")){let a=e.find(".lahb-field-input").val();a.trim()?0<!o.find("a").find(".lahb-text-placeholder-el").length?o.find("a").find(".lahb-element-name").hide().after("<span class=\"lahb-text-placeholder-el\">"+a+"</span>"):o.find("a").find(".lahb-text-placeholder-el").html(a):o.find("a").find("span.lahb-element-name").show().end().end().find(".lahb-text-placeholder-el").remove()}}),i()||(w.find(".lahb-modal-wrap").hide(),w.find(".lahb-modal-wrap[data-element-target]").remove())}),function(){g.sortable({connectWith:".lahb-elements-place",placeholder:"ui-sortable-placeholder",forcePlaceholderSize:!0,tolerance:"pointer",start:function(e,l){let t=a(l.item);q=t.closest(".lahb-tab-panel").attr("id"),I=t.closest(".lahb-row").attr("data-labhrow"),D=t.closest(".lahb-col").attr("data-align-col")},beforeStop:function(e,l){let n,d=a(l.item),i=d.closest(".lahb-elements-place"),s=d.data("element"),r=d.data("unique-id").toString(),o=k[q][I][D];for(let a=0;a<o.length;a++)o[a].uniqueId==r&&(n=o.splice(a,1));I=d.closest(".lahb-row").attr("data-labhrow"),D=d.closest(".lahb-col").attr("data-align-col");let h=i.children(".lahb-elements-item").map(function(e,l){return d=a(l),{name:d.data("element"),uniqueId:d.data("unique-id").toString(),hidden_element:JSON.parse(d.data("hidden_element")),editor_icon:d.data("editor_icon")}}).get();k[q][I][D]=h,b(),c(),t()}}).disableSelection()}(),w.find(".lahb-tabs-panels").hasClass("lahb-vertical-header-panel")||function(){_.sortable({placeholder:"ui-sortable-placeholder",forcePlaceholderSize:!0,tolerance:"pointer",start:function(){},beforeStop:function(e,l){let n=a(l.item),d=n.closest(".lahb-row-sortable"),i=d.attr("id");d.find(">.lahb-row").each(function(e){let l=a(this).data("labhrow"),t=e+1;a(this).removeClass("row-order-1 row-order-2 row-order-3 row-order-4").addClass("row-order-"+t),k[i][l].settings.order=t}),b(),c(),t()}}).disableSelection()}(),h(a(".lahb-modal-wrap")[0]),a("#lahb-publish").on("click",function(t){if(t.preventDefault(),0==w.children(".lahb-spinner-wrap").length&&w.prepend("<div class=\"lahb-spinner-wrap\"><div class=\"lahb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>"),document.getElementById("LaStudo_Iframe")){let e=document.getElementById("LaStudo_Iframe").contentWindow.jQuery("#lastudio-header-builder");0==e.children(".lahb-spinner-wrap").length&&e.prepend("<div class=\"lahb-spinner-wrap\"><div class=\"lahb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>")}a.ajax({type:"POST",url:lahb_localize.ajaxurl,data:{action:"lahb_ajax_action",router:"publish_header",nonce:lahb_localize.nonce,frontendComponents:JSON.stringify(x)},success:function(){if(w.children(".lahb-spinner-wrap").remove(),document.getElementById("LaStudo_Iframe")){let e=document.getElementById("LaStudo_Iframe").contentWindow.jQuery("#lastudio-header-builder");e.children(".lahb-spinner-wrap").remove()}if(0<a(".btn-complete-edits").length){var e=a(".btn-complete-edits").data("current_url");history.pushState(null,null,e),w.find(">h4").remove(),a(".btob-button, #lahb-export").each(function(){var e=a(this).attr("href");a(this).attr("href",l(e,"prebuild_header"))})}j&&location.reload()}})}),a(".lahb-action-collapse").on("click",function(){let e=a(this),l=a(".lastudio-backend-header-builder-wrap.lahb-frontend-builder").css("bottom","-60%"),t=a(".lahb-actions").css("bottom","0");e.hasClass("lahb-open")?(l.css("bottom","-60%"),t.css("bottom","0"),e.removeClass("lahb-open"),e.children("i").attr("class","dashicons dashicons-arrow-up-alt")):(l.css("bottom","0"),t.css("bottom","60%"),e.addClass("lahb-open"),e.children("i").attr("class","dashicons dashicons-arrow-down-alt"))}),a.lahbGetMultiScripts=function(e,l){let t=a.map(e,function(e){return a.getScript((l||"")+e)});return t.push(a.Deferred(function(e){a(e.resolve)})),a.when.apply(a,t)},a.getStylesheet=function(e){var l=a.Deferred(),t=a("<link/>",{rel:"stylesheet",type:"text/css",href:e}).appendTo("head");return l.resolve(t),l.promise()},a("#lahb-import").change(function(){var e=event.target.files[0],a=new FileReader;a.onload=p,a.readAsText(e)}),a(document).on("click",".lahb-prebuild-item",function(e){if(e.preventDefault(),"undefined"==typeof a(this).attr("data-file-name"))window.location.href=a(this).attr("href");else if(confirm("Your selected header pre-defined will apply on current elements and settings. Are you sure you want to overwrite?")){let e=a(this).attr("data-file-name"),l=lahb_localize.prebuilds_url+e;a.ajax({dataType:"json",type:"POST",url:l,success:function(e){m(e)}})}}),a(document).on("click",".lahb-full-modal .lahb-prebuild-item i.dashicons-trash",function(){return event.preventDefault(),confirm("Are you sure you want to delete this preset ?")&&a.ajax({type:"POST",url:lahb_localize.ajaxurl,data:{action:"lahb_ajax_action",router:"delete_header_preset_template",nonce:lahb_localize.nonce,header_key:a(this).parent().data("saved-name")},dataType:"json",success:function(l){if(l.success){let t="",n="";for(let a in l.data){let d=l.data[a],i=e(window.location.href,"prebuild_header",a);n+="<option value=\""+a+"\">"+d.name+"</option>",t+="undefined"==typeof d.image?"<a class=\"lahb-prebuild-item\" data-saved-name=\""+a+"\" href=\""+i+"\"><span>"+d.name+"</span><i class=\"dashicons dashicons-trash\"></i></a>":"<a class=\"lahb-prebuild-item\" data-saved-name=\""+a+"\" href=\""+i+"\"><img src=\""+d.image+"\" alt=\""+d.name+"\"/><i class=\"dashicons dashicons-trash\"></i></a>"}a(".lahb-predefined-modal-inner-content").html(t),a(".lahb-modal-save-header select[data-field-name=\"lahb_save_header_type_existing\"]").html(n),alert("Deleted successfully!")}else alert("Sorry, please try again!")}}),!1}),"vertical"==k["desktop-view"].row1.settings.header_type){let e=w.find(".lahb-tabs-panels"),l=e.find("#desktop-view").children(".lahb-row[data-labhrow=\"row1\"]").children(".lahb-elements-item"),t=a("#lahb-vertical-header");l.attr("data-element","vertical-area"),t.find("span").text("Horizontal Header"),e.removeClass("lahb-horizontal-header-panel").addClass("lahb-vertical-header-panel"),y.sortable({axis:""})}w.on("click","#lahb-vertical-header",function(e){e.preventDefault();let l=a(this),n=a(".lahb-tabs-list"),d=w.find(".lahb-tabs-panels"),i=d.find("#desktop-view").children(".lahb-row[data-labhrow=\"row1\"]").children(".lahb-elements-item"),s=k["desktop-view"].row1.settings,r=s.header_type;"horizontal"==r?(s.element="vertical-area",i.attr("data-element","vertical-area"),s.header_type="vertical",l.find("span").text(lahb_localize.i18n.horizontal_header_text),d.removeClass("lahb-horizontal-header-panel").addClass("lahb-vertical-header-panel"),y.sortable({axis:""}),l.attr("data-header_type","vertical")):(s.element="header-area",i.attr("data-element","header-area"),s.header_type="horizontal",l.find("span").text(lahb_localize.i18n.vertical_header_text),d.removeClass("lahb-vertical-header-panel").addClass("lahb-horizontal-header-panel"),y.sortable({axis:""}),a("#wrap").removeClass("lahb-header-vertical-toggle"),l.attr("data-header_type","horizontal")),x["desktop-view"].row1.settings.element=k["desktop-view"].row1.settings.element,x["desktop-view"].row1.settings.header_type=k["desktop-view"].row1.settings.header_type,b(),c(),t(),n.find("li").removeClass("w-active"),n.find("li:first-child").addClass("w-active"),a(".lahb-tab-panel").hide(),a("#desktop-view").css("display","block")})})})}(jQuery);